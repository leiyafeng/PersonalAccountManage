<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.lyf.account.dao.plan.PlanDao" >

    <resultMap id="planMap" type="cn.lyf.account.bean.Plan">
        <id column="id" property="id" jdbcType="INTEGER" />
        <result column="user_id" property="userId" jdbcType="INTEGER" />
        <result column="goal" property="goal" jdbcType="VARCHAR" />
        <result column="plan_begain_time" property="planBegainTime" jdbcType="TIMESTAMP" />
        <result column="plan_end_time" property="planEndTime" jdbcType="TIMESTAMP" />
        <result column="plan_priority" property="planPriority" jdbcType="INTEGER" />
        <result column="plan_description" property="planDescription" jdbcType="VARCHAR" />
        <result column="plan_ahead_time" property="planAheadTime" jdbcType="INTEGER" />
        <result column="plan_delay_time" property="planDelayTime" jdbcType="INTEGER" />
        <result column="plan_status" property="planStatus" jdbcType="INTEGER" />
        <result column="creat_time" property="creatTime" jdbcType="TIMESTAMP" />
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    </resultMap>

    <!--插入计划 -->
    <insert id="insertPlan" parameterType="cn.lyf.account.bean.Plan">
        INSERT into t_plan
        (user_id,goal,plan_begain_time,plan_end_time,plan_priority,plan_description,plan_status,creat_time)
        VALUES
        (#{userId},#{goal},#{planBegainTime},#{planEndTime},#{planPriority},#{planDescription},#{planStatus},#{creatTime})
    </insert>

    <!-- 分页查询计划列表-->
    <select id="findAllPlanByPage" resultMap="planMap"  parameterType="HashMap">

        select * from t_plan limit #{start},#{end};

    </select>
    <!--查询计划总条数-->
    <select id="getTotal" resultType="Integer">
        SELECT count(0)
        from
        t_plan
    </select>
    <!--修改计划-->
    <update id="updatePlanById" parameterType="cn.lyf.account.bean.Plan" >
            update t_plan
            <set >
                <if test="goal != null" >
                    goal = #{goal,jdbcType=VARCHAR},
                </if>
                <if test="planPriority != null" >
                    plan_priority = #{planPriority,jdbcType=INTEGER},
                </if>
                <if test="planBegainTime != null" >
                    plan_begain_time = #{planBegainTime,jdbcType=TIMESTAMP},
                </if>
                <if test="planEndTime != null" >
                    plan_end_time = #{planEndTime,jdbcType=TIMESTAMP},
                </if>
                <if test="planStatus != null" >
                    plan_status = #{planStatus,jdbcType=INTEGER},
                </if>
                <if test="planAheadTime != null" >
                    plan_ahead_time = #{planAheadTime,jdbcType=INTEGER},
                </if>
                <if test="planDelayTime != null" >
                    plan_delay_time = #{planDelayTime,jdbcType=INTEGER},
                </if>
            </set>
            where id = #{id,jdbcType=INTEGER}
    </update>
</mapper>